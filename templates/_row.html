<tr id="row-{{ part.uuid }}">
    <td class="cell" hx-get="/parts/{{ part.uuid }}/edit/description" hx-target="#row-{{ part.uuid }}" hx-swap="outerHTML">
        {{ part.description }}</td>

    <td class="cell" hx-get="/parts/{{ part.uuid }}/edit/package" hx-target="#row-{{ part.uuid }}" hx-swap="outerHTML">{{
        part.package }}</td>

    <td class="cell" hx-get="/parts/{{ part.uuid }}/edit/container_id" hx-target="#row-{{ part.uuid }}" hx-swap="outerHTML">
        {% if part.container_id and part.container_id|trim %}
        <span class="chip">{{ part.container_id }}</span>
        {% else %}
        <span class="chip muted">â€”</span>
        {% endif %}
    </td>

    <td class="cell mono" hx-get="/parts/{{ part.uuid }}/edit/quantity" hx-target="#row-{{ part.uuid }}"
        hx-swap="outerHTML">{{ part.quantity }}</td>

    <td class="cell" hx-get="/parts/{{ part.uuid }}/edit/notes" hx-target="#row-{{ part.uuid }}" hx-swap="outerHTML">{{
        part.notes }}</td>

    <td class="cell" hx-get="/parts/{{ part.uuid }}/edit/category" hx-target="#row-{{ part.uuid }}" hx-swap="outerHTML">{{
        part.category }}</td>

    <td class="cell" hx-get="/parts/{{ part.uuid }}/edit/subcategory" hx-target="#row-{{ part.uuid }}" hx-swap="outerHTML">
        {{ part.subcategory }}</td>

    <td class="mono muted">{{ part.updated_at }}</td>

    <td class="actions">

        {# Datasheet button #}
        {% set datasheet_url = part.get("datasheet_url", "") %}
        {% if datasheet_url and datasheet_url|trim %}
        <span class="hover-preview">
            <button class="btn secondary icon" type="button" hx-get="/parts/{{ part.uuid }}/edit/datasheet_url" hx-target="#row-{{ part.uuid }}"
                hx-swap="outerHTML" title="Edit datasheet link">ğŸ“„</button>
            <span class="hover-preview__bubble" role="tooltip">
                <a class="btn secondary" href="{{ datasheet_url }}" target="_blank" rel="noopener" title="Open datasheet">Open</a>
            </span>
        </span>
        {% else %}
        <button class="btn secondary icon" type="button" hx-get="/parts/{{ part.uuid }}/edit/datasheet_url" hx-target="#row-{{ part.uuid }}"
            hx-swap="outerHTML" title="Add datasheet link">ğŸ“„</button>
        {% endif %}

        {# Device image (photo) #}
        {% set image_url = part.get("image_url", "") %}
        {% if image_url and image_url|trim %}
        {% set image_url_l = image_url|lower %}
        {% if image_url_l.endswith('.png')
              or image_url_l.endswith('.jpg')
              or image_url_l.endswith('.jpeg')
              or image_url_l.endswith('.gif')
              or image_url_l.endswith('.webp')
              or image_url_l.endswith('.svg') %}
        <span class="hover-preview">
            <button class="btn secondary icon" type="button" hx-get="/parts/{{ part.uuid }}/edit/image_url" hx-target="#row-{{ part.uuid }}"
                hx-swap="outerHTML" title="Edit device image">ğŸ–¼ï¸</button>
            <span class="hover-preview__bubble" role="tooltip">
                <a href="{{ image_url }}" target="_blank" rel="noopener" title="Open device image">
                    <img class="hover-preview__img" src="{{ image_url }}" alt="Device image preview" loading="lazy" />
                </a>
            </span>
        </span>
        {% else %}
        <span class="hover-preview">
            <button class="btn secondary icon" type="button" hx-get="/parts/{{ part.uuid }}/edit/image_url" hx-target="#row-{{ part.uuid }}"
                hx-swap="outerHTML" title="Edit device image">ğŸ–¼ï¸</button>
            <span class="hover-preview__bubble" role="tooltip">
                <a class="btn secondary" href="{{ image_url }}" target="_blank" rel="noopener" title="Open device image">Open</a>
            </span>
        </span>
        {% endif %}
        {% else %}
        <button class="btn secondary icon" hx-get="/parts/{{ part.uuid }}/edit/image_url" hx-target="#row-{{ part.uuid }}"
            hx-swap="outerHTML" title="Add device image">ğŸ–¼ï¸</button>
        {% endif %}

        {# Pinout button #}
        {% set pinout_url = part.get("pinout_url", "") %}
        {% if pinout_url and pinout_url|trim %}
        {% set pinout_url_l = pinout_url|lower %}
        <span class="hover-preview">
            <button class="btn secondary icon" type="button" hx-get="/parts/{{ part.uuid }}/edit/pinout_url" hx-target="#row-{{ part.uuid }}"
                hx-swap="outerHTML" title="Edit pinout link">ğŸ”Œ</button>
            <span class="hover-preview__bubble" role="tooltip">
                {% if pinout_url_l.endswith('.png')
                      or pinout_url_l.endswith('.jpg')
                      or pinout_url_l.endswith('.jpeg')
                      or pinout_url_l.endswith('.gif')
                      or pinout_url_l.endswith('.webp')
                      or pinout_url_l.endswith('.svg') %}
                <a href="{{ pinout_url }}" target="_blank" rel="noopener" title="Open pinout">
                    <img class="hover-preview__img" src="{{ pinout_url }}" alt="Pinout preview" loading="lazy" />
                </a>
                {% else %}
                <a class="btn secondary" href="{{ pinout_url }}" target="_blank" rel="noopener" title="Open pinout">Open</a>
                {% endif %}
            </span>
        </span>
        {% else %}
        <button class="btn secondary icon" type="button" hx-get="/parts/{{ part.uuid }}/edit/pinout_url" hx-target="#row-{{ part.uuid }}"
            hx-swap="outerHTML" title="Add pinout link">ğŸ”Œ</button>
        {% endif %}

        <form hx-post="/parts/{{ part.uuid }}/delete" hx-target="#table" hx-swap="innerHTML"
            hx-confirm="Delete this part?">
            <button class="btn danger" type="submit">Del</button>
        </form>
    </td>
</tr>